<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ˆæ¡ˆç®¡ç†å…¨åŠŸèƒ½è¤‡ç¿’ç³»çµ± V3.0</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --secondary: #1e40af;
            --accent: #f59e0b;
            --bg-main: #f8fafc;
            --bg-sidebar: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --mask-bg: #cbd5e1;
            --mask-color: transparent;
            --sidebar-width: 280px;
            --success: #10b981;
        }
        /* Dark Mode Variables */
        body.dark-mode {
            --primary: #60a5fa;
            --primary-light: #1e293b;
            --secondary: #93c5fd;
            --accent: #fbbf24;
            --bg-main: #0f172a;
            --bg-sidebar: #1e293b;
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #334155;
            --mask-bg: #475569;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Microsoft JhengHei, sans-serif;
            line-height: 1.7;
            color: var(--text-main);
            background-color: var(--bg-main);
            margin: 0;
            display: flex;
            height: 100vh;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- Sidebar & Tools --- */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            height: 100vh;
            position: fixed;
            z-index: 100;
            transition: all 0.3s;
        }
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }
        .sidebar-header h3 { margin: 0; color: var(--primary); }
        .search-box {
            margin-top: 15px;
            position: relative;
        }
        .search-box input {
            width: 100%;
            padding: 8px 30px 8px 10px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background: var(--bg-main);
            color: var(--text-main);
        }
        .search-box::after {
            content: 'ğŸ”';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.5;
        }
        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        .sidebar-footer {
            padding: 15px;
            border-top: 1px solid var(--border);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .tool-btn {
            padding: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-size: 0.9em;
        }
        #btn-dark { background: var(--text-main); color: var(--bg-main); }
        #btn-flashcard { background: var(--accent); color: #fff; grid-column: span 2; }
        
        .nav-link {
            display: block;
            padding: 8px 10px;
            color: var(--text-main);
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 4px;
            font-size: 0.95em;
        }
        .nav-link:hover, .nav-link.active {
            background-color: var(--primary-light);
            color: var(--primary);
        }
        .nav-link .progress-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            margin-right: 8px;
        }
        .nav-link.mastered .progress-dot { background: var(--success); }

        /* --- Main Content --- */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        h1 { color: var(--primary); text-align: center; }
        h2 { 
            background: linear-gradient(to right, var(--secondary), var(--primary));
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            margin-top: 60px;
        }
        
        /* Section & Progress Checkbox */
        .section-block {
            margin-bottom: 40px;
            padding: 20px;
            background: var(--bg-sidebar);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--border);
            transition: opacity 0.3s;
        }
        .section-block.mastered {
            opacity: 0.5; /* å®Œæˆçš„ç« ç¯€è®Šæ·¡ */
        }
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-light);
        }
        .section-header h3 {
            margin: 0;
            color: var(--secondary);
            border-left: 5px solid var(--accent);
            padding-left: 12px;
        }
        .master-check {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
            font-size: 0.9em;
            padding: 4px 10px;
            border-radius: 20px;
            border: 1px solid var(--border);
        }
        .master-check.checked {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        /* Feature Components */
        .highlight-box {
            background-color: var(--primary-light);
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .exam-tip {
            background-color: #fffbeb;
            border: 1px solid var(--accent);
            color: #92400e;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
        }
        body.dark-mode .exam-tip { background: #451a03; color: #fbbf24; border-color: #92400e; }
        
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid var(--border); padding: 12px; }
        th { background-color: var(--primary-light); color: var(--secondary); }
        
        .process-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-top: 20px; }
        .process-card {
            background: var(--bg-main);
            padding: 15px;
            border-radius: 8px;
            border-top: 4px solid var(--accent);
            border: 1px solid var(--border);
        }

        /* --- Quiz Mode & Masks --- */
        .quiz-mask {
            border-bottom: 2px dotted var(--text-muted);
            transition: all 0.3s;
        }
        body.quiz-mode .quiz-mask {
            background-color: var(--mask-bg) !important;
            color: transparent !important;
            border-radius: 4px;
            padding: 0 4px;
            cursor: pointer;
            user-select: none;
        }
        body.quiz-mode .quiz-mask.revealed {
            background-color: transparent !important;
            color: inherit !important;
            animation: pop 0.3s ease-out;
            border-bottom: 2px solid var(--success);
        }
        @keyframes pop { 50% { transform: scale(1.1); } }

        /* Quiz Toggle Button (Floating) */
        #quiz-fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
            cursor: pointer;
            z-index: 90;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.3s;
        }
        #quiz-fab:hover { transform: scale(1.05); }
        body.quiz-mode #quiz-fab { background: var(--accent); }

        /* --- Local Notes --- */
        .note-area {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px dashed var(--border);
        }
        .note-toggle {
            background: none; border: none; color: var(--text-muted);
            cursor: pointer; font-size: 0.9em; display: flex; align-items: center; gap: 5px;
        }
        .note-toggle:hover { color: var(--primary); }
        .my-note {
            width: 100%;
            height: 80px;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid var(--accent);
            border-radius: 6px;
            background: var(--bg-main);
            color: var(--text-main);
            font-family: inherit;
            resize: vertical;
            display: none; /* Hidden by default */
        }
        .my-note.active { display: block; }

        /* --- Flashcard Modal --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7); z-index: 1000;
            display: none; justify-content: center; align-items: center;
        }
        .modal-overlay.active { display: flex; }
        .flashcard {
            background: var(--bg-sidebar);
            padding: 30px;
            border-radius: 15px;
            width: 90%; max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            position: relative;
        }
        .flashcard h4 { color: var(--text-muted); margin-top: 0; }
        .flashcard-question {
            font-size: 1.4em; margin: 30px 0;
            min-height: 60px; display: flex; align-items: center; justify-content: center;
        }
        .flashcard-answer {
            font-size: 1.5em; color: var(--primary); font-weight: bold;
            padding: 20px; background: var(--primary-light); border-radius: 8px;
            display: none; animation: pop 0.3s;
        }
        .close-modal {
            position: absolute; top: 15px; right: 15px;
            background: none; border: none; font-size: 1.5em; cursor: pointer; color: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .main-content { margin-left: 0; padding: 20px 15px; }
            #mobile-menu-toggle { display: block; position: fixed; top: 15px; left: 15px; z-index: 101; background: var(--bg-sidebar); padding: 8px; border-radius: 6px; border: 1px solid var(--border); }
        }
    </style>
</head>
<body>

    <button id="mobile-menu-toggle" style="display:none;">â˜°</button>

    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>ğŸš€ å…¨åŠŸèƒ½è¤‡ç¿’ç³»çµ±</h3>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="æœå°‹ç­†è¨˜å…§å®¹...">
            </div>
        </div>
        <div class="sidebar-nav">
            <a href="#sec1" class="nav-link">ğŸ¯ åŸºç¤æ¦‚å¿µèˆ‡æ¶æ§‹</a>
            <a href="#sec1-1" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec1-1"></span>å®šç¾©èˆ‡å€åˆ¥</a>
            <a href="#sec1-2" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec1-2"></span>PMBOK çŸ¥è­˜é«”ç³»</a>
            <a href="#sec2" class="nav-link">ğŸ§­ èµ·å§‹éšæ®µ (Initiating)</a>
            <a href="#sec2-1" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec2-1"></span>å°ˆæ¡ˆé¸æ“‡æ¨¡å‹</a>
            <a href="#sec2-2" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec2-2"></span>å°ˆæ¡ˆç« ç¨‹</a>
            <a href="#sec2-3" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec2-3"></span>åˆ©å®³é—œä¿‚äºº</a>
            <a href="#sec3" class="nav-link">ğŸ§± è¦åŠƒéšæ®µ (Planning)</a>
            <a href="#sec3-1" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec3-1"></span>è¨ˆç•«æ›¸èˆ‡åŸºæº–</a>
            <a href="#sec3-2" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec3-2"></span>ç¯„ç–‡ (WBS)</a>
            <a href="#sec3-3" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec3-3"></span>è²¬ä»» (RACI)</a>
            <a href="#sec3-4" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec3-4"></span>æºé€šè¦åŠƒ</a>
            <a href="#sec4" class="nav-link">âš™ï¸ PM è§’è‰²èˆ‡æ–¹æ³•è«–</a>
            <a href="#sec4-1" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec4-1"></span>çµ„ç¹”çµæ§‹å½±éŸ¿</a>
            <a href="#sec4-2" class="nav-link" style="padding-left: 25px;"><span class="progress-dot" data-target="sec4-2"></span>Waterfall vs Agile</a>
        </div>
        <div class="sidebar-footer">
            <button id="btn-dark" class="tool-btn">ğŸŒ™ å¤œé–“æ¨¡å¼</button>
            <button id="btn-reset" class="tool-btn" style="background: #ef4444; color: white;">ğŸ—‘ï¸ é‡ç½®</button>
            <button id="btn-flashcard" class="tool-btn">ğŸ² éš¨æ©ŸæŠ½é¡Œè€ƒæˆ‘ï¼</button>
        </div>
    </nav>

    <main class="main-content">
        
        <section id="sec1">
            <h1>ğŸ“˜ å°ˆæ¡ˆç®¡ç†æ ¸å¿ƒçŸ¥è­˜ç­†è¨˜</h1>
            <h2>ğŸ¯ ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¤æ¦‚å¿µèˆ‡æ¶æ§‹</h2>
            
            <div id="sec1-1" class="section-block">
                <div class="section-header">
                    <h3>å£¹ã€å°ˆæ¡ˆæ ¸å¿ƒå®šç¾©</h3>
                    <div class="master-check" data-id="sec1-1"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <div class="highlight-box">
                        <strong>æ­£å¼å®šç¾©ï¼š</strong> å°ˆæ¡ˆæ˜¯ç‚ºå‰µé€ ä¸€å€‹<span class="quiz-mask">ç¨ä¸€ç„¡äºŒ</span>çš„ç”¢å“ã€æœå‹™æˆ–æˆæœï¼Œè€Œå¾äº‹çš„ä¸€å€‹<span class="quiz-mask">æš«æ™‚æ€§</span>çš„å¿ƒåŠ›ã€‚
                    </div>
                    <ul>
                        <li><strong>ç¨ä¸€ç„¡äºŒ (Unique)</strong>ï¼šç”¢å‡ºç‰©å…·æœ‰<span class="quiz-mask">ç¨ç‰¹æ€§</span>ã€‚</li>
                        <li><strong>æš«æ™‚æ€§ (Temporary)</strong>ï¼šæœ‰æ˜ç¢ºçš„<span class="quiz-mask">é–‹å§‹èˆ‡çµæŸ</span>æ™‚é–“ã€‚</li>
                    </ul>
                    <h4>âš”ï¸ å°ˆæ¡ˆ vs. æ—¥å¸¸ä½œæ¥­</h4>
                    <table>
                        <tr><th>æ¯”è¼ƒ</th><th>å°ˆæ¡ˆ (Project)</th><th>æ—¥å¸¸ä½œæ¥­ (Operations)</th></tr>
                        <tr><td>æ€§è³ª</td><td><span class="quiz-mask">ä¸€æ¬¡æ€§</span>ã€ç¨ç‰¹</td><td><span class="quiz-mask">é‡è¤‡æ€§</span>ã€ä¾‹è¡Œæ€§</td></tr>
                        <tr><td>ç¢ºå®šæ€§</td><td>å…·<span class="quiz-mask">ä¸ç¢ºå®šæ€§</span></td><td>è¼ƒå…·<span class="quiz-mask">å¯é æ¸¬æ€§</span></td></tr>
                    </table>
                </div>
                <div class="note-area">
                    <button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button>
                    <textarea class="my-note" placeholder="å¯«ä¸‹ä½ çš„å¿ƒå¾—æˆ–å£è¨£... (è‡ªå‹•å„²å­˜)"></textarea>
                </div>
            </div>

            <div id="sec1-2" class="section-block">
                <div class="section-header">
                    <h3>è²³ã€PMBOK çŸ¥è­˜é«”ç³»</h3>
                    <div class="master-check" data-id="sec1-2"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <div class="exam-tip">å¿…è€ƒï¼šäº”å¤§æµç¨‹ç¾¤çµ„å£è¨£ã€‚</div>
                    <div class="process-grid">
                        <div class="process-card"><strong>1. èµ·å§‹</strong><br>å£è¨£ï¼š<span class="quiz-mask" style="color:#dc2626; background:#fee2e2;">æŒ‘ã€å¤ ã€æ–‡ã€äºº</span></div>
                        <div class="process-card"><strong>2. è¦åŠƒ</strong><br>å£è¨£ï¼š<span class="quiz-mask" style="color:#dc2626; background:#fee2e2;">å·¥ã€è³‡ã€æ’ã€éšª</span></div>
                        <div class="process-card"><strong>3. åŸ·è¡Œ</strong><br>å£è¨£ï¼š<span class="quiz-mask" style="color:#dc2626; background:#fee2e2;">äººã€ç®¡ã€åŠ©</span></div>
                        <div class="process-card"><strong>4. ç›£æ§</strong><br>å£è¨£ï¼š<span class="quiz-mask" style="color:#dc2626; background:#fee2e2;">å‚¬ã€æ¯”ã€æã€è¶•</span></div>
                        <div class="process-card"><strong>5. çµæŸ</strong><br>å£è¨£ï¼š<span class="quiz-mask" style="color:#dc2626; background:#fee2e2;">é©—ã€ç´„ã€éŒ¢ã€å ±</span></div>
                    </div>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>
        </section>

        <section id="sec2">
            <h2>ğŸ§­ ç¬¬äºŒéƒ¨åˆ†ï¼šèµ·å§‹éšæ®µ (Initiating)</h2>
            <div id="sec2-1" class="section-block">
                <div class="section-header">
                    <h3>å£¹ã€å°ˆæ¡ˆé¸æ“‡æ¨¡å‹</h3>
                    <div class="master-check" data-id="sec2-1"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <ul>
                        <li><strong>è–ç‰› (Sacred Cow)</strong>ï¼š<span class="quiz-mask">é«˜éšä¸»ç®¡</span>æ„å¿—ï¼Œå¿…é ˆåŸ·è¡Œã€‚</li>
                    </ul>
                    <table>
                        <tr><th>è²¡å‹™æŒ‡æ¨™</th><th>æ ¸å¿ƒå®šç¾©</th><th>æ±ºç­–æ¨™æº–</th></tr>
                        <tr><td>é‚„æœ¬æœŸæ³•</td><td>å›æ”¶åˆå§‹æŠ•è³‡æ™‚é–“ã€‚<span class="quiz-mask">å¿½ç•¥</span>è²¨å¹£æ™‚é–“åƒ¹å€¼ã€‚</td><td>è¶Š<span class="quiz-mask">çŸ­</span>è¶Šå¥½ã€‚</td></tr>
                        <tr><td>æ·¨ç¾å€¼ (NPV)</td><td>æœªä¾†ç¾é‡‘æµæŠ˜ç¾æ¸›æŠ•è³‡ã€‚<span class="quiz-mask">è€ƒé‡</span>è²¨å¹£æ™‚é–“åƒ¹å€¼ã€‚</td><td>è¶Š<span class="quiz-mask">é«˜</span>è¶Šå¥½ (æœ€é‡è¦)ã€‚</td></tr>
                        <tr><td>å…§éƒ¨å ±é…¬ç‡ (IRR)</td><td>ä½¿ NPV = <span class="quiz-mask">0</span> çš„æŠ˜ç¾ç‡ã€‚</td><td>è¶Š<span class="quiz-mask">é«˜</span>è¶Šå¥½ã€‚</td></tr>
                    </table>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

            <div id="sec2-2" class="section-block">
                <div class="section-header">
                    <h3>è²³ã€å°ˆæ¡ˆç« ç¨‹ (Project Charter)</h3>
                    <div class="master-check" data-id="sec2-2"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <p>æ ¸å¿ƒå®šç¾©ï¼šå°ˆæ¡ˆçš„ã€Œå‡ºç”Ÿè­‰æ˜ã€ï¼Œæ­£å¼<span class="quiz-mask">æˆæ¬Šå°ˆæ¡ˆå­˜åœ¨</span>ï¼Œä¸¦è³¦äºˆ PM <span class="quiz-mask">å‹•ç”¨è³‡æºçš„è·æ¬Š</span>ã€‚</p>
                    <div class="exam-tip">Sponsor (ç™¼èµ·äºº) æ‡‰ç‚ºã€Œ<span class="quiz-mask">å€‹äºº</span>ã€ï¼Œç›®æ¨™é ˆç¬¦åˆ <span class="quiz-mask">SMART</span> åŸå‰‡ã€‚</div>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

            <div id="sec2-3" class="section-block">
                <div class="section-header">
                    <h3>åƒã€åˆ©å®³é—œä¿‚äºº (Stakeholder)</h3>
                    <div class="master-check" data-id="sec2-3"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <p>PM é ˆé è¨­å¤šæ•¸äººå› æ…£æ€§è€Œ<span class="quiz-mask">åå°æ”¹è®Š</span>ã€‚</p>
                    <h4>æ¬ŠåŠ›/å½±éŸ¿åŠ›æ–¹æ ¼åœ–</h4>
                    <ul>
                        <li>é«˜æ¬ŠåŠ›ã€é«˜å½±éŸ¿åŠ›ï¼š<strong><span class="quiz-mask">é‡é»ç®¡ç† (Manage Closely)</span></strong> (VVIP)ã€‚</li>
                        <li>é«˜æ¬ŠåŠ›ã€ä½å½±éŸ¿åŠ›ï¼š<strong><span class="quiz-mask">ä¿æŒæ»¿æ„ (Keep Satisfied)</span></strong>ã€‚</li>
                        <li>ä½æ¬ŠåŠ›ã€é«˜å½±éŸ¿åŠ›ï¼š<strong><span class="quiz-mask">ä¿æŒå‘ŠçŸ¥ (Keep Informed)</span></strong>ã€‚</li>
                        <li>ä½æ¬ŠåŠ›ã€ä½å½±éŸ¿åŠ›ï¼š<strong><span class="quiz-mask">æœ€ä½ç¨‹åº¦é—œæ³¨ (Monitor)</span></strong>ã€‚</li>
                    </ul>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>
        </section>

        <section id="sec3">
            <h2>ğŸ§± ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¦åŠƒéšæ®µ (Planning)</h2>
            <div id="sec3-1" class="section-block">
                <div class="section-header">
                    <h3>å£¹ã€è¨ˆç•«æ›¸èˆ‡ä¸‰å¤§åŸºæº–</h3>
                    <div class="master-check" data-id="sec3-1"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <p>åŸºæº– (Baseline) ä¸€æ—¦æ ¸å¯ï¼Œä»»ä½•è®Šå‹•éœ€èµ° <strong><span class="quiz-mask">è®Šæ›´ç®¡åˆ¶ (Change Control)</span></strong>ã€‚</p>
                    <p>ä¸‰å¤§åŸºæº–ï¼š<span class="quiz-mask">ç¯„ç–‡</span>åŸºæº–ã€<span class="quiz-mask">æ™‚ç¨‹</span>åŸºæº–ã€<span class="quiz-mask">æˆæœ¬</span>åŸºæº–ã€‚</p>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

            <div id="sec3-2" class="section-block">
                <div class="section-header">
                    <h3>è²³ã€ç¯„ç–‡ (WBS)</h3>
                    <div class="master-check" data-id="sec3-2"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <ul>
                        <li><strong>ç¯„ç–‡æ½›è®Š (Scope Creep)</strong>ï¼šæ“´å±•ç¯„ç–‡ä½†<span class="quiz-mask">æœªèª¿æ•´æ™‚ç¨‹/é ç®—</span>ã€‚</li>
                        <li><strong>ç¯„ç–‡éé‡‘ (Gold Plating)</strong>ï¼šåš<span class="quiz-mask">å¤šé¤˜çš„èŠ±ä¿åŠŸèƒ½</span>ã€‚</li>
                        <li><strong>WBS æœ€åº•å±¤</strong>ï¼š<span class="quiz-mask">å·¥ä½œåŒ… (Work Package)</span>ã€‚</li>
                    </ul>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

            <div id="sec3-3" class="section-block">
                <div class="section-header">
                    <h3>åƒã€è²¬ä»»åˆ†æ´¾çŸ©é™£ (RACI)</h3>
                    <div class="master-check" data-id="sec3-3"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <div class="exam-tip">åŸå‰‡ï¼šæ¯å€‹å·¥ä½œåŒ…åªèƒ½æœ‰ä¸€ä½ <span class="quiz-mask">ç•¶è²¬è€… (Accountable)</span>ã€‚</div>
                    <ul>
                        <li><strong>R (Responsible)</strong>ï¼šå¯¦éš›åŸ·è¡Œè€…ã€‚</li>
                        <li><strong>A (Accountable)</strong>ï¼šè² æœ€çµ‚å…¨è²¬è€… (<span class="quiz-mask">åªèƒ½ä¸€äºº</span>)ã€‚</li>
                        <li><strong>C (Consult)</strong>ï¼šè«®è©¢è€… (é›™å‘)ã€‚</li>
                        <li><strong>I (Inform)</strong>ï¼šå‘ŠçŸ¥è€… (å–®å‘)ã€‚</li>
                    </ul>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

             <div id="sec3-4" class="section-block">
                <div class="section-header">
                    <h3>è‚†ã€æºé€šè¦åŠƒ</h3>
                    <div class="master-check" data-id="sec3-4"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <p>PM ç´„ <strong><span class="quiz-mask">75% ~ 90%</span></strong> æ™‚é–“åœ¨æºé€šã€‚</p>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>
        </section>

        <section id="sec4">
            <h2>âš™ï¸ ç¬¬å››éƒ¨åˆ†ï¼šPM è§’è‰²èˆ‡æ–¹æ³•è«–</h2>
            <div id="sec4-1" class="section-block">
                <div class="section-header">
                    <h3>å£¹ã€çµ„ç¹”çµæ§‹å½±éŸ¿</h3>
                    <div class="master-check" data-id="sec4-1"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <table>
                        <tr><th>çµ„ç¹”</th><th>PM æ¬Šé™</th><th>PM è§’è‰²</th></tr>
                        <tr><td>åŠŸèƒ½å¼</td><td><span class="quiz-mask">å¹¾ä¹æ²’æœ‰</span></td><td><span class="quiz-mask">å…¼ä»»</span></td></tr>
                        <tr><td>å¼±çŸ©é™£</td><td>æœ‰é™</td><td>å…¼ä»»</td></tr>
                        <tr><td>å¹³è¡¡çŸ©é™£</td><td>ä½è‡³ä¸­</td><td><span class="quiz-mask">å…¨è·</span></td></tr>
                        <tr><td>å¼·çŸ©é™£</td><td><span class="quiz-mask">ä¸­è‡³é«˜</span></td><td>å…¨è·</td></tr>
                        <tr><td>å°ˆæ¡ˆå‹</td><td><span class="quiz-mask">é«˜è‡³å¹¾ä¹å…¨éƒ¨</span></td><td>å…¨è·</td></tr>
                    </table>
                    <p>çŸ©é™£å¼çµ„ç¹”æˆå“¡æœ‰ã€Œ<span class="quiz-mask">å…©å€‹è€é—†</span>ã€ã€‚</p>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>

            <div id="sec4-2" class="section-block">
                <div class="section-header">
                    <h3>è²³ã€Waterfall vs. Agile</h3>
                    <div class="master-check" data-id="sec4-2"><span>â˜</span> æˆ‘å·²æŒæ¡</div>
                </div>
                <div class="content-body">
                    <table>
                        <tr><th></th><th>Waterfall (é æ¸¬å‹)</th><th>Agile (é©æ‡‰å‹)</th></tr>
                        <tr><td>é©ç”¨</td><td>éœ€æ±‚<span class="quiz-mask">æ˜ç¢º</span></td><td>éœ€æ±‚<span class="quiz-mask">æœªçŸ¥</span>ã€è®ŠåŒ–å¿«</td></tr>
                        <tr><td>æµç¨‹</td><td>ç·šæ€§ã€<span class="quiz-mask">è¨ˆç•«</span>å°å‘</td><td>è¿­ä»£ã€<span class="quiz-mask">åƒ¹å€¼</span>å°å‘</td></tr>
                    </table>
                </div>
                <div class="note-area"><button class="note-toggle">ğŸ“ æ·»åŠ ç­†è¨˜</button><textarea class="my-note"></textarea></div>
            </div>
        </section>

    </main>

    <button id="quiz-fab">
        <span class="icon">ğŸ›¡ï¸</span>
        <span class="text">èƒŒèª¦æ¨¡å¼</span>
    </button>

    <div class="modal-overlay" id="flashcard-modal">
        <div class="flashcard">
            <button class="close-modal" onclick="closeModal()">Ã—</button>
            <h4>ğŸ² éš¨æ©ŸæŠ½è€ƒ</h4>
            <p style="color: var(--text-muted); font-size: 0.9em;" id="flashcard-context">å‡ºè‡ªï¼šæŸç« ç¯€</p>
            <div class="flashcard-question" id="flashcard-q">
                é¡Œç›®è¼‰å…¥ä¸­...
            </div>
            <div class="flashcard-answer" id="flashcard-a">
                ç­”æ¡ˆ
            </div>
            <button id="flashcard-reveal" class="tool-btn" style="width:100%; background:var(--primary); color:#fff; padding:12px; margin-top:20px;">çœ‹ç­”æ¡ˆ</button>
            <button id="flashcard-next" class="tool-btn" style="width:100%; background:var(--accent); color:#fff; padding:12px; margin-top:10px; display:none;">ä¸‹ä¸€é¡Œ â†’</button>
        </div>
    </div>

    <script>
        /* --- 1. Initialization & Local Storage Helpers --- */
        const STORAGE_KEY_PROGRESS = 'pm_v3_progress';
        const STORAGE_KEY_NOTES = 'pm_v3_notes';
        const STORAGE_KEY_DARK = 'pm_v3_dark';

        let progressData = JSON.parse(localStorage.getItem(STORAGE_KEY_PROGRESS) || '{}');
        let notesData = JSON.parse(localStorage.getItem(STORAGE_KEY_NOTES) || '{}');
        let isDarkMode = localStorage.getItem(STORAGE_KEY_DARK) === 'true';

        function saveProgress() { localStorage.setItem(STORAGE_KEY_PROGRESS, JSON.stringify(progressData)); }
        function saveNotes() { localStorage.setItem(STORAGE_KEY_NOTES, JSON.stringify(notesData)); }

        // Apply initial states
        if (isDarkMode) document.body.classList.add('dark-mode');
        document.getElementById('btn-dark').textContent = isDarkMode ? 'â˜€ï¸ æ—¥é–“æ¨¡å¼' : 'ğŸŒ™ å¤œé–“æ¨¡å¼';

        Object.keys(progressData).forEach(id => {
            if (progressData[id]) markSectionMastered(id, true);
        });

        document.querySelectorAll('.my-note').forEach(textarea => {
            const sectionId = textarea.closest('.section-block').id;
            if (notesData[sectionId]) {
                textarea.value = notesData[sectionId];
                textarea.classList.add('active'); // Show if it has content
            }
        });

        /* --- 2. Feature: Dark Mode --- */
        document.getElementById('btn-dark').addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            document.getElementById('btn-dark').textContent = isDarkMode ? 'â˜€ï¸ æ—¥é–“æ¨¡å¼' : 'ğŸŒ™ å¤œé–“æ¨¡å¼';
            localStorage.setItem(STORAGE_KEY_DARK, isDarkMode);
        });

        /* --- 3. Feature: Quiz Mode (Masks) --- */
        const quizFab = document.getElementById('quiz-fab');
        quizFab.addEventListener('click', () => {
            const isQuizMode = document.body.classList.toggle('quiz-mode');
            quizFab.querySelector('.text').textContent = isQuizMode ? 'é€€å‡ºèƒŒèª¦' : 'èƒŒèª¦æ¨¡å¼';
            quizFab.querySelector('.icon').textContent = isQuizMode ? 'ğŸ“' : 'ğŸ›¡ï¸';
            if (!isQuizMode) {
                document.querySelectorAll('.quiz-mask.revealed').forEach(el => el.classList.remove('revealed'));
            }
        });
        document.body.addEventListener('click', (e) => {
            if (document.body.classList.contains('quiz-mode') && e.target.classList.contains('quiz-mask')) {
                e.target.classList.add('revealed');
            }
        });

        /* --- 4. Feature: Progress Tracking --- */
        function markSectionMastered(id, isMastered) {
            const section = document.getElementById(id);
            const checkBtn = section.querySelector('.master-check');
            const navDot = document.querySelector(`.progress-dot[data-target="${id}"]`);
            
            if (isMastered) {
                section.classList.add('mastered');
                checkBtn.classList.add('checked');
                checkBtn.innerHTML = '<span>â˜‘</span> å·²æŒæ¡';
                if(navDot) navDot.parentElement.classList.add('mastered');
            } else {
                section.classList.remove('mastered');
                checkBtn.classList.remove('checked');
                checkBtn.innerHTML = '<span>â˜</span> æˆ‘å·²æŒæ¡';
                if(navDot) navDot.parentElement.classList.remove('mastered');
            }
        }

        document.querySelectorAll('.master-check').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const id = btn.getAttribute('data-id');
                const newState = !progressData[id];
                progressData[id] = newState;
                markSectionMastered(id, newState);
                saveProgress();
                e.stopPropagation();
            });
        });

        /* --- 5. Feature: Local Notes --- */
        document.querySelectorAll('.note-toggle').forEach(btn => {
            btn.addEventListener('click', () => {
                const textarea = btn.nextElementSibling;
                textarea.classList.toggle('active');
                if (textarea.classList.contains('active')) textarea.focus();
            });
        });
        document.querySelectorAll('.my-note').forEach(textarea => {
            textarea.addEventListener('input', () => {
                const sectionId = textarea.closest('.section-block').id;
                notesData[sectionId] = textarea.value;
                saveNotes();
            });
        });

        /* --- 6. Feature: Live Search --- */
        const searchInput = document.getElementById('search-input');
        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            document.querySelectorAll('.section-block').forEach(section => {
                const text = section.innerText.toLowerCase();
                // Simple toggle hidden. For better UX, could highlight terms.
                section.style.display = text.includes(term) ? 'block' : 'none';
            });
            // Also hide main section headers if all children are hidden (optional, kept simple here)
        });

        /* --- 7. Feature: Random Flashcard --- */
        let flashcardItems = [];
        // Pre-scrape all masks for the flashcard system
        document.querySelectorAll('.quiz-mask').forEach(mask => {
            let questionContext = mask.closest('p, li, td, .process-card');
            let sectionTitle = mask.closest('.section-block').querySelector('h3').innerText;
            if (questionContext) {
                // Clone to avoid modifying actual DOM
                let qClone = questionContext.cloneNode(true);
                // Replace the answer part with blanks in the question
                let maskInClone = qClone.querySelector('.quiz-mask'); 
                if (maskInClone && mask.innerText.trim().length > 0) { // Ensure it's not empty
                     // Find WHICH mask it is in the clone if there are multiple
                     const allOriginalMasks = questionContext.querySelectorAll('.quiz-mask');
                     const index = Array.from(allOriginalMasks).indexOf(mask);
                     const allCloneMasks = qClone.querySelectorAll('.quiz-mask');
                     if (allCloneMasks[index]) {
                         allCloneMasks[index].innerText = 'ã€_____ã€‘';
                         allCloneMasks[index].style.borderBottom = '2px solid var(--accent)';
                     }

                    flashcardItems.push({
                        question: qClone.innerHTML,
                        answer: mask.innerText,
                        context: sectionTitle
                    });
                }
            }
        });

        const modal = document.getElementById('flashcard-modal');
        const qEl = document.getElementById('flashcard-q');
        const aEl = document.getElementById('flashcard-a');
        const cEl = document.getElementById('flashcard-context');
        const revealBtn = document.getElementById('flashcard-reveal');
        const nextBtn = document.getElementById('flashcard-next');

        function showRandomFlashcard() {
            if (flashcardItems.length === 0) { alert('æ‰¾ä¸åˆ°å¯ç”¨çš„è€ƒé¡Œï¼'); return; }
            const item = flashcardItems[Math.floor(Math.random() * flashcardItems.length)];
            qEl.innerHTML = item.question;
            aEl.innerText = item.answer;
            cEl.innerText = 'å‡ºè‡ªï¼š' + item.context;
            aEl.style.display = 'none';
            revealBtn.style.display = 'block';
            nextBtn.style.display = 'none';
            modal.classList.add('active');
        }

        function closeModal() { modal.classList.remove('active'); }

        document.getElementById('btn-flashcard').addEventListener('click', showRandomFlashcard);
        revealBtn.addEventListener('click', () => {
            aEl.style.display = 'block';
            revealBtn.style.display = 'none';
            nextBtn.style.display = 'block';
        });
        nextBtn.addEventListener('click', showRandomFlashcard);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

        /* --- 8. Reset Data --- */
        document.getElementById('btn-reset').addEventListener('click', () => {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰é€²åº¦å’Œç­†è¨˜å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) {
                localStorage.removeItem(STORAGE_KEY_PROGRESS);
                localStorage.removeItem(STORAGE_KEY_NOTES);
                location.reload();
            }
        });

        /* --- Mobile Menu --- */
        document.getElementById('mobile-menu-toggle').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('open');
        });
        // Close sidebar when clicking a link on mobile
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                 if (window.innerWidth <= 768) document.getElementById('sidebar').classList.remove('open');
            });
        });

    </script>
</body>
</html>
